<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#f5f5f7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>suni</title>
    <!-- Add favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⏱️</text></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
</head>
<body ontouchstart="">
    <h1>suni</h1>
    
    <div class="app-wrapper">
        <div class="app-container glass-card">
            <!-- Chevron toggle button -->
            <div class="history-toggle" id="historyToggle" title="View history">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </div>
            
            <div class="timer-column">
                <div class="timer-display" id="timer">25:00</div>
                <div class="timer-label" id="timerLabel">focus time</div>
                
                <div class="timer-controls">
                    <button id="startBtn" type="button">start</button>
                    <button id="pauseBtn" type="button" disabled>pause</button>
                    <button id="resetBtn" type="button" class="secondary-button">reset</button>
                </div>
                
                <div class="session-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="todaySessions">0</div>
                        <div class="stat-label">sessions today</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalMinutes">0</div>
                        <div class="stat-label">minutes today</div>
                    </div>
                </div>
            </div>
            
            <div class="progress-column">
                <div class="progress-title">what did you work on this session?</div>
                <div class="progress-input">
                    <textarea id="progressInput" placeholder="type tasks you've accomplished during this focus session..."></textarea>
                </div>
            </div>
        </div>
        
        <div class="history-panel" id="historyPanel">
            <div class="history-panel-header">
                <div class="timeline-title">history</div>
            </div>
            <div class="vertical-timeline" id="verticalTimeline">
                <!-- Timeline items will be added here dynamically -->
            </div>
        </div>
    </div>

    <div class="day-timeline-container">
        <!-- <div class="day-timeline-label">today's journey</div> -->
        <div class="day-timeline" id="dayTimeline">
            <!-- Timeline segments will be added here dynamically -->
        </div>
    </div>

    <script src="script.js"></script>

    // Add this script to the end of your HTML file (right before </body>) to fix the start button

<script>
// Direct fix for mobile buttons (runs immediately)
document.addEventListener('DOMContentLoaded', function() {
  // Get buttons
  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resetBtn = document.getElementById('resetBtn');
  const historyToggle = document.getElementById('historyToggle');
  
  // Fix for mobile browsers
  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
  
  if (isMobile) {
    console.log("Mobile device detected, applying button fixes");
    
    // Remove all existing event listeners (drastic but effective)
    startBtn.replaceWith(startBtn.cloneNode(true));
    pauseBtn.replaceWith(pauseBtn.cloneNode(true));
    resetBtn.replaceWith(resetBtn.cloneNode(true));
    historyToggle.replaceWith(historyToggle.cloneNode(true));
    
    // Get fresh references after replacing
    const newStartBtn = document.getElementById('startBtn');
    const newPauseBtn = document.getElementById('pauseBtn');
    const newResetBtn = document.getElementById('resetBtn');
    const newHistoryToggle = document.getElementById('historyToggle');
    
    // Add direct event handlers
    newStartBtn.addEventListener('click', function(e) {
      e.preventDefault();
      console.log("Start button clicked");
      // Direct call to your timer function
      window.mobileStartTimer();
    });
    
    newPauseBtn.addEventListener('click', function(e) {
      e.preventDefault();
      console.log("Pause button clicked");
      window.mobilePauseTimer();
    });
    
    newResetBtn.addEventListener('click', function(e) {
      e.preventDefault();
      console.log("Reset button clicked");
      window.mobileResetTimer();
    });
    
    newHistoryToggle.addEventListener('click', function(e) {
      e.preventDefault();
      console.log("History toggle clicked");
      
      // Toggle classes directly
      const historyPanel = document.getElementById('historyPanel');
      const appWrapper = document.querySelector('.app-wrapper');
      
      newHistoryToggle.classList.toggle('active');
      historyPanel.classList.toggle('active');
      appWrapper.classList.toggle('history-active');
      
      // Update timeline if panel is being opened
      if (historyPanel.classList.contains('active')) {
        window.updateVerticalTimeline && window.updateVerticalTimeline();
      }
    });
  }
});
</script>

</body>
</html>